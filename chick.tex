\chapter{\Chick{}: a core dependently-typed language and its repair
algorithm}~\label{chick}

Another pain point that both beginners and experts encounter frequently is that
of refactoring existing programs and proofs.  Often times, one might realize,
while working on a proof, that an earlier data type must be updated to add
additional information.  One might also need to update existing data types and
functions when they want to extend an existing formalization.  In both
situations, after updating their definition, the programmer must perform a
series of corrections to the rest of their code base to account for the
newly-modified definitions.  Many of those changes are mechanical, structural
changes that require no knowledge of the program domain, and no creative input
from the programmer.  We would like to lower the burden on the programmer for
such maintenance tasks, only leaving the complex parts of the refactoring to
them.

This chapter will focus on the development and evaluation of a tool (named
\Chick{}\footnotemark{}) whose purpose is to help functional programmers
propagate changes, made to some of their definitions, to the rest of their code.

\footnotetext{All code for \Chick{} is publicly available at:
\url{https://github.com/Ptival/chick}}

Section~\ref{chick-background} gives background specific to this chapter.

Section~\ref{chick-design} describes the global design of the tool and its
components.

Section~\ref{chick-syntax} covers the syntax of the language over which \Chick{}
operates.

Section~\ref{chick-diffs} describes a family of data types that allow us to
perform repairs.

Section~\ref{chick-lookup} will present both usual lookup rules, and
\Chick{}-specific lookup rules, that are necessary to describe the repair
algorithm.

Section~\ref{chick-repair} describes all the components of the repair algorithm.

Section~\ref{chick-deriving} goes into more details into how some diff
operations needed by the repair algorithm can be automatically derived from
small descriptions of their reactions to certain changes in the data structure
they operate on.

Section~\ref{chick-guess}, finally, describes how we automatically infer diffs
from pairs of programs without requiring additional user input.

\input{chick-background}
\input{chick-design}
\input{chick-syntax}
\input{chick-diffs}
\input{chick-lookup}
\input{chick-repair}
\input{chick-deriving}
\input{chick-guess}

This chapter is, in part, currently being prepared for submission for
publication of the material.
